{% extends 'base.html' %}

{% block title %}–°–ø–∏—Å–æ–∫ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è{% endblock %}

{% block content %}
{% load django_bootstrap5 %}
<h1 class="mb-4">–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</h1>

<p>
    <a href="{% url 'devices:equipment_create' %}" class="btn btn-success">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</a>
</p>

<form method="get" class="card card-body mb-4 border">
  <div class="row g-3">
    {% if user.is_superuser %}
        <div class="col-md-2">
          {% bootstrap_field filter.form.company %}
        </div>
    {% endif %}
    <div class="col-md-2">
      {% bootstrap_field filter.form.employee %}
    </div>
    <div class="col-md-2">
      {% bootstrap_field filter.form.equipment_type %}
    </div>
    <div class="col-md-2">
      {% bootstrap_field filter.form.serial_number %}
    </div>
    <div class="col-md-2">
      {% bootstrap_field filter.form.model %}
    </div>
  </div>
  <div class="mt-3">
    <button class="btn btn-primary" type="submit">–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å</button>
    <a class="btn btn-outline-secondary" href="{% url 'devices:equipment_list' %}">–°–±—Ä–æ—Å–∏—Ç—å</a>
  </div>
</form>

{% if equipment_items %}
<div class="table-responsive">
    <table class="table table-hover table-striped">
        <thead class="table-dark">
            <tr>
                <th>–ú–æ–¥–µ–ª—å</th>
                <th>–°–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä</th>
                <th>–¢–∏–ø</th>
                <th>–ö–æ–º–ø–∞–Ω–∏—è</th>
                <th>–°–æ—Ç—Ä—É–¥–Ω–∏–∫</th>
                <th>–°–æ—Å—Ç–æ—è–Ω–∏–µ</th>
                <th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for item in filtered_equipment %}
            <tr>
                <td>{{ item.model }}</td>
                <td>{{ item.serial_number }}</td>
                <td>{{ item.equipment_type.name }}</td>
                <td>{{ item.company.name }}</td>
                <td>{{ item.employee|default:"-" }}</td>
                <td>{{ item.get_condition_display }}</td>
                <td>{{ item.comment|default:"-" }}</td>
                <td>
                    <a href="{% url 'devices:equipment_update' item.pk %}" class="btn btn-sm btn-primary me-2">–ò–∑–º–µ–Ω–∏—Ç—å</a>
                    <a href="{% url 'devices:equipment_delete' item.pk %}" class="btn btn-sm btn-danger">–£–¥–∞–ª–∏—Ç—å</a>
                    {% if item.company.report_file_to %}
                        <a href="{% url 'devices:equipment_download_report' item.pk %}?to_user=true" class="btn btn-sm btn-success" title="–í—ã–¥–∞—Ç—å">üì•–í—ã–¥–∞—Ç—å</a>
                    {% endif %}
                    {% if item.company.report_file_from %}
                        <a href="{% url 'devices:equipment_download_report' item.pk %}?to_user=false" class="btn btn-sm btn-success" title="–ü—Ä–∏–Ω—è—Ç—å">üì•–ü—Ä–∏–Ω—è—Ç—å</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="alert alert-info" role="alert">
    –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.
</div>
{% endif %}
{% endblock %}
